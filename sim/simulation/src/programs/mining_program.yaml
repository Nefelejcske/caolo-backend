lanes:
  - name: "main"
    cards:
      - ty: StringLiteral
        val: "RESOURCE"
      - ty: CallNative
        val: "Parse Find Constant"
      - ty: CallNative
        val: "Find Closest"
      - ty: SetLocalVar
        val: "resource"
      - ty: ReadVar
        val: "resource"
      - ty: ScalarNull
      - ty: Equals
      - ty: IfTrue
        val:
          LaneName: "resource-error"
        # push `resource` for approach call
      - ty: ReadVar
        val: "resource"
      - ty: ReadVar
        val: "resource"
      - ty: CallNative
        val: Mine

      - ty: ScalarInt
        val: 0
      - ty: Equals
      - ty: IfElse
        val:
          then: { LaneName: "mine-success" }
          else: { LaneName: "approach-resource" }

  - name: "approach-resource"
    arguments:
      - resource
    cards:
      - ty: ReadVar
        val: "resource"
      - ty: CallNative
        val: "Approach Entity"
      - ty: StringLiteral
        val: "Work work...Move Result: "
      - ty: CallNative
        val: "Console Log"

  - name: "resource-error"
    cards:
      - ty: StringLiteral
        val: "No resource found"
      - ty: CallNative
        val: "Console Log"
      - ty: ExitWithCode
        val: 1

  - name: "mine-success"
    cards:
      - ty: StringLiteral
        val: "I be mining baws"
      - ty: CallNative
        val: "Console Log"
